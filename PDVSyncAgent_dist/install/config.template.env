# =============================================================================
# PDV Sync Agent v4.0 - Production Configuration Template
# =============================================================================
# Este arquivo é gerado automaticamente pelo install.bat.
# Caminhos absolutos apontam para C:\ProgramData\PDVSyncAgent.
# =============================================================================

# -----------------------------------------------------------------------------
# SQL Server Connection
# -----------------------------------------------------------------------------
SQL_SERVER_HOST=localhost
SQL_SERVER_INSTANCE=HIPER
SQL_DATABASE=HiperPdv
SQL_DATABASE_GESTAO=Hiper

# --- Driver ODBC ---
# Use "auto" para detecção automática (recomendado).
# O agente detecta Driver 18 → 17 → 13 via Registro do Windows.
# Se preferir fixar: "ODBC Driver 17 for SQL Server"
SQL_DRIVER=auto

# --- Criptografia (importante para Driver 18) ---
# Driver 18 exige Encrypt=yes por padrão, o que QUEBRA em localhost sem cert.
# Para conexão LOCAL, use: Encrypt=no
# Para conexão REMOTA com cert: Encrypt=yes + SQL_TRUST_SERVER_CERT=no
SQL_ENCRYPT=no
SQL_TRUST_SERVER_CERT=yes

# -----------------------------------------------------------------------------
# Autenticação (MODO A: SQL Auth — recomendado para deploy)
# -----------------------------------------------------------------------------
# Usuário dedicado com permissão mínima (SELECT em dbo).
# Criação no SQL Server:
#   CREATE LOGIN pdv_sync WITH PASSWORD = 'SuaSenhaAqui';
#   USE HiperPdv;
#   CREATE USER pdv_sync FOR LOGIN pdv_sync;
#   GRANT SELECT ON SCHEMA::dbo TO pdv_sync;
SQL_TRUSTED_CONNECTION=false
SQL_USERNAME=pdv_sync
SQL_PASSWORD=__DB_PASSWORD__

# --- MODO B (fallback): Windows Authentication ---
# Use quando a TI já configurou login NT AUTHORITY\SYSTEM no SQL Server.
# Descomente as 3 linhas abaixo e comente as 3 acima:
# SQL_TRUSTED_CONNECTION=true
# SQL_USERNAME=
# SQL_PASSWORD=

# -----------------------------------------------------------------------------
# Store Identification (preenchido pelo install.bat)
# -----------------------------------------------------------------------------
STORE_ID_PONTO_VENDA=__STORE_ID__
STORE_ID_FILIAL=__STORE_ID_FILIAL__
STORE_ALIAS=__STORE_ALIAS__

# -----------------------------------------------------------------------------
# API Endpoint (Central Server)
# -----------------------------------------------------------------------------
API_ENDPOINT=https://webhook.soclick.click/webhook/1276580b-9957-402a-8ad6-bb13b9e0d349
API_TOKEN=__API_TOKEN__
REQUEST_TIMEOUT_SECONDS=15

# -----------------------------------------------------------------------------
# Sync Configuration
# -----------------------------------------------------------------------------
SYNC_WINDOW_MINUTES=10

# -----------------------------------------------------------------------------
# Local State & Queue (caminhos absolutos para ProgramData)
# -----------------------------------------------------------------------------
STATE_FILE=C:\ProgramData\PDVSyncAgent\data\state.json
OUTBOX_DIR=C:\ProgramData\PDVSyncAgent\data\outbox

# -----------------------------------------------------------------------------
# Logging (caminhos absolutos para ProgramData)
# -----------------------------------------------------------------------------
LOG_FILE=C:\ProgramData\PDVSyncAgent\logs\agent.log
LOG_LEVEL=INFO
LOG_ROTATION=10 MB
LOG_RETENTION=30 days
